<mat-card>
    <mat-card-header>
        <div class="g-just-flex flex-between w-100 flex-wrap gap-20">
            <div class="left">
                <mat-card-title class="">
                    Medication
                    <a (click)="patientOpenAndClose.openPatientDetailsStrip()" style="text-decoration: none;"
                        [routerLink]="['/patients', patientId]" routerLinkActive="router-link-active">
                        for {{patientName | async}}
                    </a>
                </mat-card-title>
                <mat-card-subtitle>
                    Find, search and add current and past medications for this patient
                </mat-card-subtitle>
            </div>
            <div class="right gap-10 g-just-flex">
                <a mat-flat-button extended class="secondary-button small-button">
                    <mat-icon>file_download</mat-icon> Export
                </a>
                <a mat-flat-button class="">
                    <mat-icon>add</mat-icon>
                    Add Medications
                </a>


            </div>
        </div>
    </mat-card-header>

    <mat-card-content class="my-12">
        <mat-divider></mat-divider>
        <app-table-header [patientsTableFilterArray]="  patientObservationTableFilterArray"
            [patientsFiltersFormControlObject]=" patientObservationFiltersFormControlObject">

        </app-table-header>


        <table mat-table matSort [dataSource]="tableDataSource" class="mat-elevation-z8 demo-table">

            <!--name - coding.code.display-->
            <ng-container matColumnDef="date_prescribed">
                <th mat-header-cell *matHeaderCellDef mat-sort-header="date_prescribed"
                    sortActionDescription="Sort by Date">
                    Date Prescribed
                </th>
                <td mat-cell *matCellDef="let element">{{element.authoredOn}}</td>
            </ng-container>

            <!--dateRecorded - recordedDateTime -->
            <ng-container matColumnDef="medication">
                <th mat-header-cell *matHeaderCellDef mat-sort-header="medication"
                    sortActionDescription="Sort by Medication">
                    Medication
                </th>
                <td mat-cell *matCellDef="let element">{{element.medicationCodeableConcept.text}}</td>
            </ng-container>

            <!--category - category.coding.display -->
            <ng-container matColumnDef="dosage_instruction">
                <th mat-header-cell *matHeaderCellDef mat-sort-header="dosage_instruction"
                    sortActionDescription="Sort by Dosage">
                    Dosage
                </th>
                <td mat-cell *matCellDef="let element">{{element.dosageInstruction[0].text}}</td>
            </ng-container>

            <!--verificationStatus - verificationStatus.coding[0].code   -->
            <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef mat-sort-header="staus" sortActionDescription="Sort by Status">
                    Status
                </th>
                <td mat-cell *matCellDef="let element">{{element.status}}</td>
            </ng-container>


            <!--clinicalStatus - clinicalStatus.coding[0].code -->


            <tr mat-header-row *matHeaderRowDef="patientConditionDisplayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: patientConditionDisplayedColumns;" (click)="showRow(row)"></tr>
        </table>
    </mat-card-content>
</mat-card>