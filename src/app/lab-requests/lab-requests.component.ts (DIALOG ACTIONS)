// If DetailzViewzComponent doesn't support customActions, use mat-dialog-actions

showLabRequestDetailsWithActions(serviceRequest: any): void {
  const dialogRef = this.dialog.open(CustomLabRequestDialogComponent, {
    maxHeight: '93vh',
    maxWidth: '800px',
    data: { serviceRequest }
  });

  dialogRef.afterClosed().subscribe((result: any) => {
    if (result?.action) {
      this.handleAction(result.action, serviceRequest);
    }
  });
}

// Custom dialog component template with actions
@Component({
  selector: 'app-custom-lab-request-dialog',
  template: `
    <h2 mat-dialog-title>Lab Request Details</h2>
    
    <mat-dialog-content>
      <app-detailz-viewz
        [resourceData]="data.serviceRequest"
        [detailsBuilderObject]="detailsBuilder">
      </app-detailz-viewz>
    </mat-dialog-content>

    <mat-dialog-actions align="end">
      @if(data.serviceRequest.status === 'active') {
        <button mat-flat-button color="primary" (click)="onAction('collect-specimen')">
          <mat-icon>water_drop</mat-icon>
          Collect Specimen
        </button>
        <button mat-flat-button color="warn" (click)="onAction('cancel-request')">
          <mat-icon>cancel</mat-icon>
          Cancel Request
        </button>
      }
      @if(data.serviceRequest.status === 'completed') {
        <button mat-flat-button color="accent" (click)="onAction('view-results')">
          <mat-icon>visibility</mat-icon>
          View Results
        </button>
      }
      <button mat-button mat-dialog-close>Close</button>
    </mat-dialog-actions>
  `
})
export class CustomLabRequestDialogComponent {
  constructor(
    public dialogRef: MatDialogRef<CustomLabRequestDialogComponent>,
    @Inject(MAT_DIALOG_DATA) public data: any
  ) {}

  onAction(action: string): void {
    this.dialogRef.close({ action });
  }
}
