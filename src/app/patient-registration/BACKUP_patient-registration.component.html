<div class="fixed-background">
    <svg class="stethoscope-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path
            d="M12 2C8.13 2 5 5.13 5 9c0 3.87 3.13 7 7 7s7-3.13 7-7c0-3.87-3.13-7-7-7zm0 12c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z" />
        <path
            d="M12 4c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" />
        <path
            d="M12 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z" />
        <path
            d="M12 10c-.55 0-1 .45-1-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0 2c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z" />
        <path
            d="M12 14c-1.1 0-2 .9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm0 3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z" />
        <path
            d="M12 16c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0 2c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z" />
    </svg>
    <svg class="stethoscope-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path
            d="M12 2C8.13 2 5 5.13 5 9c0 3.87 3.13 7 7 7s7-3.13 7-7c0-3.87-3.13-7-7-7zm0 12c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z" />
        <path
            d="M12 4c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" />
        <path
            d="M12 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z" />
        <path
            d="M12 10c-.55 0-1 .45-1-1s.45-1 1-1h0c.55-.45 1-1 1-1s.45 1 1 1 .45 1 1 1 .45-1 1-1 .45-1 1-1h0c.55 0 1 .45 1 1s-.45 1-1 1h0c-.55.45-1 .45-1 .45s-.45.45-1 .45-.45.45-1 .45z" />
        <path
            d="M12 14c-1.1 0-2 .9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm0 3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z" />
        <path
            d="M12 16c-.55 0-1 .45-1 1-1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0 2c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z" />
        <path
            d="M12 18c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z" />
    </svg>
    <svg class="stethoscope-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path
            d="M12 2C8.13 2 5 5.13 5 9c0 3.87 3.13 7 7 7s7-3.13 7-7c0-3.87-3.13-7-7-7zm0 12c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z" />
        <path
            d="M12 4c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" />
        <path
            d="M12 8c-1.1 0-2 .9-2 2s.9 2 2 2h0c1.1-.45 1-.45 1-.45s.45-.45.45-.45h0c0 .55-.45 .55-.45 .55s-.55 .55-.55 .55h0c-.55 .55-.55 .55-.55 .55s-.45 .45-.45 .45h0c-.55 .55-.55 .55-.55 .55s-.45 .45-.45 .45h0c-.55 .55-.55 .55-.55 .55s-.45 .45-.45 .45h0c-.55 .55-.55 .55-.55 .55s-.45 .45-.45 .45h0c-.55 .55-.55 .55-.55 .55s-.45 .45-.45 .45h0c-.55 .55-.55 .55-.55 .55s-.45 .45-.45 .45h0c1.1 -.9 -1 -1 -1 -1z" />
        <path
            d="M12 10c1.1 -.9 -1 -1 -1 -1s-1 .9 -1 2 1 2 2 2h0c.55 0 1-.45 1-1s-.45-1-1-1zm0 3c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z" />
        <path
            d="M12 14c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 3c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z" />
        <path
            d="M12 16c-.55 0-1 .45-1 1-1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0 2c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z" />
        <path
            d="M12 18c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z" />
    </svg>

</div>

<div class="top-nav">
    <!-- <a [routerLink]="['/home']" routerLinkActive="router-link-active">
        Home
    </a> -->
    <a [routerLink]="['/register']" routerLinkActive="router-link-active">
        Register
    </a>
    <a [routerLink]="['/login']" routerLinkActive="router-link-active">
        Sign In
    </a>
</div>
@if(designatedFormFields && designatedRegForm && guardianFormFields && guardianRegForm){
<div class="" style="max-width: 900px; margin: 30px auto;">
    <mat-tab-group #tabGroup [mat-stretch-tabs]="false" [mat-align-tabs]="'center'">

        <mat-tab label="Your Details">
            <div class="" style="max-width: 900px;">
                @if(showForm){
                @if(designatedFormFields && designatedRegForm){
                <app-dynamic-forms-v2 [formFields]="designatedFormFields" [formMetaData]="designatedRegForm"
                    [resetOnSubmit]="false" (formSubmitted)="onDesignatedFormSubmit($event)">

                </app-dynamic-forms-v2>}
                }@else{
                <!-- Patient Data Review Component - Standalone Mode -->
                <app-patient-data-review [formFields]="designatedFormFields" [submittedData]="submittedData"
                    [showEditButtons]="true" [mode]="'standalone'" (fieldEdited)="onFieldEdited($event)"
                    (navigateNext)="onNavigateToNext()">
                </app-patient-data-review>
                }

            </div>
        </mat-tab>
        <mat-tab label="Guardian / Dependent Details">
            <div class="" style="max-width: 900px;">
                @if(showGuardianForm){
                @if(guardianFormFields && guardianRegForm){
                <app-dynamic-forms-v2 [formFields]="guardianFormFields" [formMetaData]="guardianRegForm"
                    [resetOnSubmit]="false" (formSubmitted)="onGuardianFormSubmit($event)">
                </app-dynamic-forms-v2>
                }
                }@else{
                <!-- Guardian Data Review Component - Standalone Mode -->
                <app-patient-data-review [formFields]="guardianFormFields" [submittedData]="guardianSubmittedData"
                    [showEditButtons]="true" [mode]="'standalone'" (fieldEdited)="onGuardianFieldEdited($event)"
                    (navigateNext)="onGuardianNavigateNext()">
                </app-patient-data-review>
                }
            </div>

        </mat-tab>
        <div class="" style="max-width: 900px;">
            <mat-tab label="Upload Photo & Documents">
                <div class="tab-title py-15" style="text-align: center;">
                    Upload Photo & Documents
                </div>
                <app-upload-ui allowedFilesCategoryLabel="Image" uploadFieldName="Photo"></app-upload-ui>
            </mat-tab>
        </div>
    </mat-tab-group>
</div>}

@if(submittedData){
<div style="max-width: 900px; margin: 30px auto;">
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div style="padding: 20px; background: #f5f5f5; border-radius: 8px;">
            <h3 style="margin-top: 0; color: #666;">ðŸ“‹ Raw Form Data</h3>
            <pre
                style="background: white; padding: 15px; border-radius: 4px; overflow: auto; font-size: 12px;">{{submittedData | json}}</pre>
        </div>
        <div style="padding: 20px; background: #e8f5e9; border-radius: 8px;">
            <h3 style="margin-top: 0; color: #2e7d32;">ðŸ”¥ FHIR R4 Patient Resource</h3>
            <pre
                style="background: white; padding: 15px; border-radius: 4px; overflow: auto; font-size: 12px;">{{fhirPatient | json}}</pre>
        </div>
    </div>
</div>
}